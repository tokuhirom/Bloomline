<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bloomline</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='18' cy='20' r='7' fill='%234a9eff'/><line x1='30' y1='20' x2='90' y2='20' stroke='%234a9eff' stroke-width='8' stroke-linecap='round'/><circle cx='28' cy='50' r='7' fill='%23aaa'/><line x1='40' y1='50' x2='90' y2='50' stroke='%23aaa' stroke-width='8' stroke-linecap='round'/><circle cx='28' cy='80' r='7' fill='%23aaa'/><line x1='40' y1='80' x2='90' y2='80' stroke='%23aaa' stroke-width='8' stroke-linecap='round'/></svg>">
<script type="module" src="/src/main.ts"></script>
</head>
<body>

<div id="header">
  <button id="sidebar-toggle" title="サイドバー">☰</button>
  <div id="breadcrumb"></div>
  <span id="file-info"></span>
  <input id="search-box" type="search" placeholder="検索..." autocomplete="off">
  <button id="menu-btn" title="メニュー">⋯</button>
  <div id="export-menu">
    <div class="menu-item" data-action="open-file">
      ファイルを開く
      <div class="menu-item-desc">既存の .json を開いて編集。変更は自動的にファイルへ保存されます</div>
    </div>
    <div class="menu-item" data-action="save-file-as">
      ファイルに保存
      <div class="menu-item-desc">保存先ファイルを選択。以後、変更のたびに自動保存されます</div>
    </div>
    <div class="menu-sep"></div>
    <div class="menu-item" data-action="export-text">テキストでエクスポート</div>
    <div class="menu-item" data-action="export-json">JSONでエクスポート</div>
    <div class="menu-item" data-action="export-opml">OPMLでエクスポート</div>
    <div class="menu-sep"></div>
    <div class="menu-item" data-action="import-json">JSONからインポート（旧）</div>
    <div class="menu-sep"></div>
    <div class="menu-item" data-action="shortcuts">キーボードショートカット</div>
  </div>
</div>

<!-- ショートカットモーダル -->
<div id="shortcuts-modal" style="display:none">
  <div id="shortcuts-backdrop"></div>
  <div id="shortcuts-dialog">
    <div id="shortcuts-title">キーボードショートカット</div>
    <div id="shortcuts-body">
      <div class="sc-section">編集</div>
      <div class="sc-row"><kbd>Enter</kbd><span>新規アイテムを追加（カーソル位置で分割）</span></div>
      <div class="sc-row"><kbd>Shift+Enter</kbd><span>ノートを追加してフォーカス</span></div>
      <div class="sc-row"><kbd>Backspace</kbd><span>空行を削除 / 前の行と結合 / チェックボックスを外す</span></div>
      <div class="sc-row"><kbd>⌘ Shift+BS</kbd><span>ノードを削除（子ごと）</span></div>
      <div class="sc-row"><kbd>Tab</kbd><span>インデント（子にする）</span></div>
      <div class="sc-row"><kbd>Shift+Tab</kbd><span>アウトデント（親の兄弟に昇格）</span></div>

      <div class="sc-section">移動</div>
      <div class="sc-row"><kbd>Alt+Shift+↑</kbd><span>ノードを上に移動</span></div>
      <div class="sc-row"><kbd>Alt+Shift+↓</kbd><span>ノードを下に移動</span></div>
      <div class="sc-row"><kbd>Alt+Shift+←</kbd><span>アウトデント（Shift+Tabと同じ）</span></div>
      <div class="sc-row"><kbd>Alt+Shift+→</kbd><span>インデント（Tabと同じ）</span></div>

      <div class="sc-section">TODO</div>
      <div class="sc-row"><kbd>[] + スペース</kbd><span>TODOチェックボックスに変換</span></div>
      <div class="sc-row"><kbd>⌘ Enter</kbd><span>完了 / 未完了を切り替え</span></div>
      <div class="sc-row"><kbd>⌘ O</kbd><span>完了タスクを非表示 / 再表示</span></div>

      <div class="sc-section">ナビゲーション</div>
      <div class="sc-row"><kbd>↑ / ↓</kbd><span>上下の行へ移動</span></div>
      <div class="sc-row"><kbd>Shift+↑ / ↓</kbd><span>複数行を範囲選択</span></div>
      <div class="sc-row"><kbd>Escape</kbd><span>ズームアウト / 選択解除</span></div>

      <div class="sc-section">ズーム・折りたたみ</div>
      <div class="sc-row"><kbd>● クリック</kbd><span>そのノードにズームイン</span></div>
      <div class="sc-row"><kbd>Alt+→</kbd><span>ズームイン</span></div>
      <div class="sc-row"><kbd>Alt+←</kbd><span>ズームアウト</span></div>
      <div class="sc-row"><kbd>▶ クリック</kbd><span>折りたたむ / 展開する</span></div>
      <div class="sc-row"><kbd>Ctrl+Space</kbd><span>折りたたみをトグル</span></div>
      <div class="sc-row"><kbd>Ctrl+↑</kbd><span>たたむ</span></div>
      <div class="sc-row"><kbd>Ctrl+↓</kbd><span>展開する</span></div>
      <div class="sc-row"><kbd>⌘ →</kbd><span>親ノードを折りたたむ</span></div>

      <div class="sc-section">選択中の一括操作</div>
      <div class="sc-row"><kbd>Tab</kbd><span>選択ノードを一括インデント</span></div>
      <div class="sc-row"><kbd>Shift+Tab</kbd><span>選択ノードを一括アウトデント</span></div>
      <div class="sc-row"><kbd>Backspace</kbd><span>選択ノードを一括削除</span></div>

      <div class="sc-section">Undo / Redo</div>
      <div class="sc-row"><kbd>⌘ Z</kbd><span>元に戻す</span></div>
      <div class="sc-row"><kbd>⌘ Shift+Z</kbd><span>やり直し</span></div>

      <div class="sc-section">書式設定</div>
      <div class="sc-row"><kbd>⌘ B</kbd><span>太字（**テキスト**）</span></div>
      <div class="sc-row"><kbd>⌘ I</kbd><span>斜体（*テキスト*）</span></div>
      <div class="sc-row"><kbd>⌘ U</kbd><span>下線（__テキスト__）</span></div>

      <div class="sc-section">記法</div>
      <div class="sc-row"><kbd>**テキスト**</kbd><span>太字</span></div>
      <div class="sc-row"><kbd>*テキスト*</kbd><span>斜体</span></div>
      <div class="sc-row"><kbd>__テキスト__</kbd><span>下線</span></div>
      <div class="sc-row"><kbd>[テキスト](URL)</kbd><span>クリッカブルなリンクに変換</span></div>
      <div class="sc-row"><kbd>https://...</kbd><span>URLを自動でリンク表示</span></div>

      <div class="sc-section">その他</div>
      <div class="sc-row"><kbd>⌘ ?</kbd><span>このショートカット一覧を表示</span></div>
    </div>
    <button id="shortcuts-close">閉じる</button>
  </div>
</div>

<div id="app-layout">
  <div id="sidebar">
    <div id="sidebar-header">お気に入り</div>
    <div id="sidebar-drop-zone">
      <div id="sidebar-empty">● をここにドロップ</div>
    </div>
  </div>
  <div id="main">
    <div id="content">
      <div id="page-title" contenteditable="true" data-placeholder="タイトル"></div>
      <ul id="node-root" class="node-list"></ul>
    </div>
  </div>
</div>

<div id="toast"></div>
<input id="file-import" type="file" accept=".json" style="display:none">

</body>
</html>
